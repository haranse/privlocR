<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Offline Reproducible and Privacy Preserving Location Analysis • privlocR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Offline Reproducible and Privacy Preserving Location Analysis">
<meta name="description" content='Given a set of coordinates and pre-downloaded map data from OpenStreetMap retrieves meaningful tags of locations at a certain distance atound each coordinate, such as "shop","ocean","residential". This allows for assigning meaning to locations observed in research, while preserving participant privacy. Coordinates are never sent online, and calculations are reproducible even if OpenStreetMap changes, as long as the location data files are preserved.'>
<meta property="og:description" content='Given a set of coordinates and pre-downloaded map data from OpenStreetMap retrieves meaningful tags of locations at a certain distance atound each coordinate, such as "shop","ocean","residential". This allows for assigning meaning to locations observed in research, while preserving participant privacy. Coordinates are never sent online, and calculations are reproducible even if OpenStreetMap changes, as long as the location data files are preserved.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">privlocR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/full_tag_workflow.html">Full Location Tag Workflow</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/haranse/privlocR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="privlocr">privlocR<a class="anchor" aria-label="anchor" href="#privlocr"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of privlocR is to obtain meaningful tags for location data obtained in research, translating a list of longitudes and latitudes to a list of meaningful tags describing what is found near the various locations (e.g., shop, coastline, restaurant). Researchers fitting participants with wearables or collecting location data from smartphones can obtain coordinates of participant location over time<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Of course, the project can be used with location data of any origin (e.g., weather patterns, animal movement, etc.)&lt;/p&gt;"><sup>1</sup></a>. However, given the coordinates of a participant’s location at a specific time, it would be interesting to know whether the participant is at a residential building, a shop, in a forest, or next to the sea. privlocR uses freely available, openly licensed data from the <a href="https://www.openstreetmap.org" class="external-link">OpenStreetMap</a> project<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Other map data can be used, as long as it can be converted to osm.pbf.&lt;/p&gt;"><sup>2</sup></a> to obtain that information easily, freely, privately, and reproducibly: <strong>Easily</strong>, as the package is hopefully easy to use. <strong>Freely</strong>, as data from OpenStreetMap is publicly available for free. <strong>Privately</strong>, as no data is not sent to any online service. <strong>Reproducibly</strong>, as running privlocR on the same downloaded map files will always return the same results, even as online map data changes. Additionally, privlocR code is available to understand how location data was analysed.</p>
<p>This is all in contrast to using commercial services which provide APIs that can obtain information about specific locations (see, for example, the function <code>google_places</code> from the <code>googleway</code> package). These APIs usually require setting up paid accounts with the various services, which adds complexity and cost; data is sent to the services, which could create privacy risks; analysis is not reproducible as online services update their maps, and their code is not available.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of privlocR from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"haranse/privlocR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Generating tags from a set of locations is as simple as placing an .osm.pbf map data file, which can be downloaded from <a href="https://download.geofabrik.de/" class="external-link">Geofabrik</a>, in a directory; selecting the distance around each location for which to search for tags; and running the get_close_tags function. The following example gets all location tags 100 meters or less from the two specified locations:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/haranse/privlocR" class="external-link">privlocR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Directory that contains pbf files (the R temporary dir in this case)</span></span>
<span><span class="va">mydir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Populate the directory with map file(s) downloaded from OpenStreetMap</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"tokelau.osm.pbf"</span>, package <span class="op">=</span> <span class="st">"privlocR"</span><span class="op">)</span>, <span class="va">mydir</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># The distance around each location in which we want to search for tags</span></span>
<span><span class="va">mydst</span> <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">100</span>, <span class="va">m</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example longitude and latitude values</span></span>
<span><span class="va">long</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9.1979860</span>, <span class="op">-</span><span class="fl">9.192079</span><span class="op">)</span></span>
<span><span class="va">lat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">171.8501176</span>, <span class="op">-</span><span class="fl">171.856883</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/get_close_tags.html">get_close_tags</a></span><span class="op">(</span><span class="va">mydir</span>, <span class="va">long</span>, <span class="va">lat</span>, dst <span class="op">=</span> <span class="va">mydst</span><span class="op">)</span></span>
<span><span class="co">#&gt; Re-reading with feature count reset from 52 to 29</span></span>
<span><span class="co">#&gt; Re-reading with feature count reset from 4 to 2</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] "landuse_residential" "amenity_restaurant"  "natural_reef"       </span></span>
<span><span class="co">#&gt; [4] "natural_coastline"   "natural_scrub"       "tourism_hotel"      </span></span>
<span><span class="co">#&gt; [7] "leisure_park"        "building_yes"       </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] "natural_reef"      "natural_coastline" "natural_water"    </span></span>
<span><span class="co">#&gt; [4] "natural_wood"      "building_yes"</span></span></code></pre></div>
<p>As we can see, the data tells us that while both locations are close to the ocean, the first is a more commercial area, around a hotel and a restauarant, while the second is only next to some unrecognized building.</p>
<p>Additional information including other ways to download map data, as well as advice regarding performance see the full tag workflow vignette.</p>
</div>
<div class="section level2">
<h2 id="roadmap">Roadmap<a class="anchor" aria-label="anchor" href="#roadmap"></a>
</h2>
<p>There are additional ways to obtain meaning from such data, including clustering (i.e., identifying that participants were at the same “place” at time A and time B) or assessing mobility (e.g., by estimating the distance traveled by the participant every day). Future versions are planned to include additional analyses, providing a standard way to extract a variety of features from location data.</p>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>This project has received funding from the European Union’s Horizon 2020 research and innovation programme under the Marie Sklodowska-Curie grant agreement No 101023860.</p>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/haranse/privlocR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/haranse/privlocR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing privlocR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Haran Sened <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0003-0467-1154" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>European Research Council <br><small class="roles"> Funder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/haranse/privlocR/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/haranse/privlocR/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/haranse/privlocR" class="external-link"><img src="https://codecov.io/gh/haranse/privlocR/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Haran Sened, European Research Council.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
