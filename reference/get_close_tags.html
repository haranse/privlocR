<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get tags close to a series of locations — get_close_tags • privlocR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get tags close to a series of locations — get_close_tags"><meta name="description" content="get_close_tags() returns relevant tags which are at a certain distance from each location, giving a
meaningful sense of the type of place the person is in without providing exact data. No data is sent
online. If repeated queries are performed from the same directory with the same tags and the same or smaller distance,
most of the analysis will be drawn from cache and analysis time will be greatly reduced."><meta property="og:description" content="get_close_tags() returns relevant tags which are at a certain distance from each location, giving a
meaningful sense of the type of place the person is in without providing exact data. No data is sent
online. If repeated queries are performed from the same directory with the same tags and the same or smaller distance,
most of the analysis will be drawn from cache and analysis time will be greatly reduced."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">privlocR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/full_tag_workflow.html">Full Location Tag Workflow</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/haranse/privlocR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get tags close to a series of locations</h1>
      <small class="dont-index">Source: <a href="https://github.com/haranse/privlocR/blob/main/R/get_close_tags.R" class="external-link"><code>R/get_close_tags.R</code></a></small>
      <div class="d-none name"><code>get_close_tags.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>get_close_tags()</code> returns relevant tags which are at a certain distance from each location, giving a
meaningful sense of the type of place the person is in without providing exact data. No data is sent
online. If repeated queries are performed from the same directory with the same tags and the same or smaller distance,
most of the analysis will be drawn from cache and analysis time will be greatly reduced.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_close_tags</span><span class="op">(</span></span>
<span>  <span class="va">pbfdir</span>,</span>
<span>  <span class="va">lat</span>,</span>
<span>  <span class="va">long</span>,</span>
<span>  layers <span class="op">=</span> <span class="va">DEFAULT_LAYERS</span>,</span>
<span>  tags <span class="op">=</span> <span class="va">DEFAULT_TAGS</span>,</span>
<span>  dst <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">100</span>, <span class="va">m</span><span class="op">)</span>,</span>
<span>  refilter_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-pbfdir">pbfdir<a class="anchor" aria-label="anchor" href="#arg-pbfdir"></a></dt>
<dd><p>File directory with .osm.pbf files containing map data for the relevant area. The directory must be writeable as during processing the function will create temporary files in this directory, and then delete them.</p></dd>


<dt id="arg-lat">lat<a class="anchor" aria-label="anchor" href="#arg-lat"></a></dt>
<dd><p>numeric vector of latitudes</p></dd>


<dt id="arg-long">long<a class="anchor" aria-label="anchor" href="#arg-long"></a></dt>
<dd><p>numeric vector of longitudes</p></dd>


<dt id="arg-layers">layers<a class="anchor" aria-label="anchor" href="#arg-layers"></a></dt>
<dd><p>relevant layers from the pbf files (Do not touch if not familiar with OpenStreetMap data)</p></dd>


<dt id="arg-tags">tags<a class="anchor" aria-label="anchor" href="#arg-tags"></a></dt>
<dd><p>location tags of interest (Do not touch if not familiar with OpenStreetMap data)</p></dd>


<dt id="arg-dst">dst<a class="anchor" aria-label="anchor" href="#arg-dst"></a></dt>
<dd><p>max distance from each location to look for tags</p></dd>


<dt id="arg-refilter-data">refilter_data<a class="anchor" aria-label="anchor" href="#arg-refilter-data"></a></dt>
<dd><p>forcefully ignore cache</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>less verbose function output</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>list of vectors of tags, one for each location</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mydir</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"tokelau.osm.pbf"</span>, package <span class="op">=</span> <span class="st">"privlocR"</span><span class="op">)</span>, <span class="va">mydir</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">get_close_tags</span><span class="op">(</span><span class="va">mydir</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9.1979860</span>, <span class="op">-</span><span class="fl">9.192079</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">171.8501176</span>, <span class="op">-</span><span class="fl">171.856883</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> Cannot open "/tmp/RtmpltG6RS/file1a38387ba3eb.gpkg"; The file doesn't seem to exist.</span>
<span class="r-in"><span><span class="fu">get_close_tags</span><span class="op">(</span><span class="va">mydir</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9.1979860</span>, <span class="op">-</span><span class="fl">9.192079</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">171.8501176</span>, <span class="op">-</span><span class="fl">171.856883</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      dst <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">10</span>,<span class="va">m</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> Cannot open "/tmp/RtmpltG6RS/file1a38387ba3eb.gpkg"; The file doesn't seem to exist.</span>
<span class="r-in"><span><span class="fu">get_close_tags</span><span class="op">(</span><span class="va">mydir</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">9.1979860</span>, <span class="op">-</span><span class="fl">9.192079</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">171.8501176</span>, <span class="op">-</span><span class="fl">171.856883</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      dst <span class="op">=</span> <span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">10</span>,<span class="va">m</span><span class="op">)</span>, tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"amenity"</span>,<span class="st">"landuse"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>cannot remove file '/tmp/RtmpltG6RS/file1a38387ba3eb.gpkg', reason 'No such file or directory'</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> Cannot open "/tmp/RtmpltG6RS/file1a38448fc0f1.gpkg"; The file doesn't seem to exist.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Haran Sened, European Research Council.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

